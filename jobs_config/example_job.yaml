# /home/cducak/pyforge/jobs_config/example_job.yaml
job:
  name: My Mixed Language Project
  agent:
    name: linux_agent_1
  scm:
    type: git
    url: https://github.com/teknolojikpanda/ubuntu_repo_fetcher # Example repo
    branch: master
  steps:
    - name: Run Shell Command
      language: shell
      script: |
        echo "Hello from a shell step!"
        echo "My environment variable: $MY_VAR"
      environment:
        MY_VAR: "ShellValue"

    - name: Run Python Script
      script: |
        import os
        import sys
        
        print("Hello from a Python step!")
        print(f"Python version: {sys.version}")
        print(f"Current working directory: {os.getcwd()}")
        
        # Access environment variables
        my_var = os.environ.get("MY_PY_VAR", "DefaultPythonValue")
        print(f"My Python environment variable: {my_var}")
        
        # Create a file
        with open("python_output.txt", "w") as f:
            f.write("This file was generated by a Python script in PyForge.\n")
            f.write(f"MY_PY_VAR was: {my_var}\n")
        
        print("Python script finished.")
      working_directory: "python_step_workdir" # Optional: run in a subdirectory
      environment:
        MY_PY_VAR: "PythonValue"

    - name: Another Shell Command
      language: shell
      script: cat python_step_workdir/python_output.txt

    - name: Sleep for 5 seconds
      language: shell
      script: sleep 5

  artifacts:
    - name: python_generated_file
      pattern: "python_step_workdir/python_output.txt"
  triggers:
    - type: manual
    - type: scm_poll
